define("bagman",["jquery","module"],function(e,t){"use strict";var n={container:"body",hook:"module",config:"config",global:false,debug:false},r="",i={},s=[],o=[],u=[],a=0,f={},l={},c=0,h=0;e.extend(n,t.config());r="*[data-"+n.hook+"]";i=e(n.container).find(r);l.onloadDone=false;l.debug=n.debug;l.modules=[];l.instances=[];l.init=function(){e.each(i,function(t,r){if(e.browser.msie===true&&e.browser.version<9){f.instanciate(e(r).data(n.hook),r,e(r).data(n.config))}else{if(f.elementInViewport(r)){s.push(r);r.inViewport=true;f.instanciate(e(r).data(n.hook),r,e(r).data(n.config))}else{o.push(r);r.inViewport=false}}});e(window).load(function(){l.onloadDone=true;e.each(o,function(t,r){f.instanciate(e(r).data(n.hook),r,e(r).data(n.config))})});return l};l.getInstance=function(t){var n=e(t).attr("data-instance-id");if(l.instances[n]){return l.instances[n]}else{return null}};l.getInstances=function(t,n){var r="*[data-module]",i=[],s=[];if(n){r='*[data-module="'+n+'"]'}i=e(t).find(r);e.each(i,function(t,n){var r=l.instances[e(n).attr("data-instance-id")];if(r!==undefined){s.push(r)}});return s};l.update=function(){};l.remove=function(e){};f.elementInViewport=function(e){var t=e.getBoundingClientRect();return t.top<(window.innerHeight||document.body.clientHeight)&&t.left<(window.innerWidth||document.body.clientWidth)};f.instanciate=function(t,n,r){c=c+1;var i="helper"+c,s=[];define(i,[],{module:t,el:n,config:r});s.push(t);s.push(i);require(s,function(t,n){try{var r=l.instances.push(e.extend(false,{},t));r=r-1;l.instances[r].el=e(n.el);l.instances[r].module=n.module;l.instances[r].el.attr("data-instance-id",r);l.instances[r].instanceId=r;l.instances[r].config=n.config;if(l.instances[r].init!==undefined){l.instances[r].init(e(n.el),n.config)}}catch(i){if(l.debug&&window.console){console.log("module: "+i.message)}}})};e(function(){l.init();if(n.global===true){l.config=n;window.bagman=l}});return l})